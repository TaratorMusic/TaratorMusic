<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>TaratorMusic</title>
		<link rel="stylesheet" href="style.css" />
		<meta
			http-equiv="Content-Security-Policy"
			content="default-src 'self'; media-src 'self' blob:; connect-src 'self' ws: https://i.ytimg.com https://i1.ytimg.com https://i2.ytimg.com https://i3.ytimg.com https://i4.ytimg.com https://i5.ytimg.com https://i6.ytimg.com https://i7.ytimg.com https://i8.ytimg.com https://i9.ytimg.com https://img.youtube.com https://lh3.googleusercontent.com https://api.github.com https://raw.githubusercontent.com https://i.scdn.co https://mosaic.scdn.co https://t.scdn.co https://seed-mix-image.spotifycdn.com https://thisis-images.spotifycdn.com https://spotifycdn.com https://spotifycdn.net data:; img-src 'self' data: blob: https://i.ytimg.com https://img.youtube.com https://lh3.googleusercontent.com https://i.scdn.co https://mosaic.scdn.co https://t.scdn.co https://seed-mix-image.spotifycdn.com https://thisis-images.spotifycdn.com https://spotifycdn.com https://image-cdn-ak.spotifycdn.com https://spotifycdn.net; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline';"
		/>
	</head>
	<script src="preload.js"></script>
	<body>
		<div id="allTheModals">
			<div id="createPlaylistModal" class="modal">
				<div class="modal-content">
					<div class="flexrow">
						<div class="modalTitle">Create New Playlist</div>
						<span class="close" onclick="closeModal()">&times;</span>
					</div>
					<input type="text" id="playlistNameInput" placeholder="Enter playlist name" />
					<input type="file" id="thumbnailInput" accept="image/*" style="margin-bottom: 10px" />
					<div id="modalerror"></div>
					<button id="saveNewPlaylistButton" onclick="saveNewPlaylist()">Save</button>
				</div>
			</div>
			<div id="editPlaylistModal" class="modal">
				<div class="modal-content">
					<div class="flexrow">
						<div class="modalTitle">Edit Playlist</div>
						<span class="close" onclick="closeModal()">&times;</span>
					</div>
					<input type="text" id="editPlaylistNameInput" placeholder="Enter playlist name" />
					<div class="flexrow" style="height: 55vh; justify-content: center">
						<img id="editPlaylistThumbnail" />
						<input type="file" onchange="updateThumbnailImage(event,2)" id="editPlaylistThumbnail" accept="image/*" style="margin-bottom: 10px" />
					</div>
					<div class="flexrow">
						<button id="editPlaylistDelete" onclick="deletePlaylist()">Delete</button>
						<button id="saveEditedPlaylistButton" onclick="saveEditedPlaylist()">Save</button>
					</div>
					<div id="editInvisibleId" class="invisible"></div>
					<div id="editInvisibleName" class="invisible"></div>
					<div id="editInvisiblePhoto" class="invisible"></div>
					<div id="editInvisibleExtension" class="invisible"></div>
					<div id="editModalerror"></div>
				</div>
			</div>
			<div id="addToPlaylistModal" class="modal">
				<div class="modal-content">
					<div class="flexrow">
						<div class="modalTitle">Add to Playlist</div>
						<span class="close" onclick="closeModal()">&times;</span>
					</div>
					<div id="playlist-checkboxes"></div>
				</div>
			</div>
			<div id="speedModal" class="modal">
				<div class="modal-content">
					<div class="flexrow">
						<div class="modalTitle">Change Playback Speed</div>
						<span class="close" onclick="closeModal()">&times;</span>
					</div>
					<div id="speedOptions" class="speed-options"></div>
				</div>
			</div>
			<div id="customiseModal" class="modal">
				<div class="modal-content">
					<div class="flexrow">
						<div class="modalTitle">Customise Song</div>
						<span class="close" onclick="closeModal()">&times;</span>
					</div>
					<div id="customiseModal">
						<div>
							<label for="customiseSongName">Song Name:</label>
							<input type="text" id="customiseSongName" required />
						</div>
						<div>
							<label for="customiseThumbnail">Thumbnail:</label>
							<input type="file" onchange="updateThumbnailImage(event, 1)" id="customiseThumbnail" accept="image/*" />
							<img id="customiseImage" />
						</div>
						<div>
							<div id="modalTimePlayed"></div>
							<div id="modalSecondsPlayed"></div>
							<div id="modalStabilised"></div>
							<div id="modalFileSize"></div>
							<div id="modalPlaySpeed"></div>
							<div id="modalBass"></div>
							<div id="modalTreble"></div>
							<div id="modalMidrange"></div>
							<div id="modalVolume"></div>
						</div>
						<div>
							<button id="removeSongButton">Remove Song</button>
							<button onclick="saveEditedSong()">Save</button>
						</div>
					</div>
				</div>
			</div>
			<div id="downloadModal" class="modal">
				<div id="downloadModalContent" class="modal-content">
					<div class="flexrow">
						<div class="modalTitle">Download Details</div>
						<span class="close" onclick="closeModal()">&#x2212;</span>
						<span class="close" onclick="cleanDownloadModal()">&times;</span>
					</div>
					<div class="flexrow">
						<input type="text" id="downloadFirstInput" placeholder="Paste Youtube or Spotify, song or playlists, or search here..." />
						<button id="downloadFirstButton" onclick="loadNewPage('download')">Check</button>
					</div>
				</div>
			</div>
			<div id="updateModal" class="modal">
				<div class="modal-content">
					<div class="flexrow">
						<div class="modalTitle">Update TaratorMusic</div>
						<span class="close" onclick="closeModal()">&times;</span>
					</div>
					<div id="patchNotes">You are using the latest version of TaratorMusic.</div>
					<div style="color: yellow">Please don't close the app while updating, as it can break. If the update breaks, you can install the latest version from Github Releases.</div>
					<div id="progressContainer" style="width: 100%; background: #ccc; display: none">
						<div id="downloadProgress" style="width: 0%; background: #4caf50; color: white; text-align: center"></div>
					</div>
					<button disabled id="installBtn">Install Update</button>
				</div>
			</div>
			<div id="searchModal" class="modal">
				<div style="justify-content: space-between" class="flexrow">
					<h1>Quick Song Search</h1>
					<span class="close" onclick="closeModal()">&times;</span>
				</div>
				<input id="searchModalInput" placeholder="Type a song name, and press Enter" />
			</div>
		</div>

		<div class="sidebar">
			<div id="main-menu" class="sidebarButtons" class="active">Main Menu</div>
			<div id="my-music" class="sidebarButtons" onclick="myMusicOnClick()">My Music</div>
			<div id="playlists" class="sidebarButtons" onclick="getPlaylists()">Playlists</div>
			<div id="settings" class="sidebarButtons" onclick="loadJSFile('settings')">Settings</div>
			<div id="statistics" class="sidebarButtons" onclick="loadNewPage('statistics')">Statistics</div>
			<div id="downloadNewFunction" class="sidebarButtons" onclick="loadNewPage('downloadModal')">Download</div>
		</div>

		<div id="content" class="content">
			<div id="main-menu-content" class="tab-content">
				<div id="version"></div>
				<div class="centermydivhehebutcolumn">
					<div id="mainmenulogo"></div>
					<div id="mainmenuapptext">TaratorMusic</div>
					<div class="flexrowbutspacearound">
						<div id="mainmenurandomsong" class="mainmenusquares" data-tooltip="Play a Random Song" onclick="randomSongFunctionMainMenu()">Random Song</div>
						<div id="mainmenurandomplaylist" class="mainmenusquares" data-tooltip="Play a Random Playlist" onclick="randomPlaylistFunctionMainMenu()">Random Playlist</div>
						<div class="mainmenusquares">
							<div id="mainmenudiscordapi" data-tooltip="Status of your Discord connection">Discord RPC Status: Loading...</div>
						</div>
						<div class="mainmenusquares">
							<div id="mainmenubotapi" style="color: yellow" data-tooltip="Status of your bot which shares your songs on Discord voice chat">Discord Bot Status: Coming Soon</div>
						</div>
					</div>
				</div>
			</div>
			<div id="my-music-content" class="tab-content hidden"></div>
			<div id="playlists-content" class="tab-content hidden"></div>
			<div id="settings-content" class="tab-content hidden scrollArea">
				<h1 class="underline-text">Keybinds</h1>
				<h2 style="margin-top: -3vh">You can choose which keys will activate which actions here.</h2>
				<div class="settingsKeybinds">
					<div>Back 5 Seconds:</div>
					<button id="settingsRewind" class="settingsKeybindsButton" required></button>
				</div>
				<div class="settingsKeybinds">
					<div>Previous Song:</div>
					<button id="settingsPrevious" class="settingsKeybindsButton" required></button>
				</div>
				<div class="settingsKeybinds">
					<div>Play/Pause:</div>
					<button id="settingsPlayPause" class="settingsKeybindsButton" required></button>
				</div>
				<div class="settingsKeybinds">
					<div>Next Song:</div>
					<button id="settingsNext" class="settingsKeybindsButton" required></button>
				</div>
				<div class="settingsKeybinds">
					<div>Skip 5 Seconds:</div>
					<button id="settingsSkip" class="settingsKeybindsButton" required></button>
				</div>
				<div class="settingsKeybinds">
					<div>Autoplay:</div>
					<button id="settingsAutoplay" class="settingsKeybindsButton" required></button>
				</div>
				<div class="settingsKeybinds">
					<div>Shuffle:</div>
					<button id="settingsShuffle" class="settingsKeybindsButton" required></button>
				</div>
				<div class="settingsKeybinds">
					<div>Mute:</div>
					<button id="settingsMute" class="settingsKeybindsButton" required></button>
				</div>
				<div class="settingsKeybinds">
					<div>Speed:</div>
					<button id="settingsSpeed" class="settingsKeybindsButton" required></button>
				</div>
				<div class="settingsKeybinds">
					<div>Loop:</div>
					<button id="settingsLoop" class="settingsKeybindsButton" required></button>
				</div>
				<div class="settingsKeybinds">
					<div>Random Song:</div>
					<button id="settingsRandomSong" class="settingsKeybindsButton" required></button>
				</div>
				<div class="settingsKeybinds">
					<div>Random Playlist:</div>
					<button id="settingsRandomPlaylist" class="settingsKeybindsButton" required></button>
				</div>
				<button onclick="saveKeybinds()">Save Keybinds</button>
				<h1 class="underline-text">Customisation</h1>
				<div class="settingsflexrow">
					<h2>Divide the Volume</h2>
					<select name="dividevolume" id="dividevolume" onchange="handleDropdownChange('dividevolume', this)">
						<option value="1">Don't divide the volume</option>
						<option value="10">Divide by 10</option>
						<option value="20">Divide by 20</option>
						<option value="50">Divide by 50</option>
					</select>
				</div>
				<h5>Divide the Volume will make the volume control easier if you want to listen to the songs more quietly.</h5>
				<div class="settingsflexrow">
					<h2>Edit Background:</h2>
					<button onclick="changeBackground('blue')">Blue</button>
					<button onclick="changeBackground('red')">Red</button>
					<button onclick="changeBackground('green')">Green</button>
					<button onclick="changeBackground('purple')">Purple</button>
					<button onclick="changeBackground('black')">Black</button>
					<h5>More detailed background customisation coming soon...</h5>
				</div>
				<h5>Change the background color or upload your own background with this setting.</h5>
				<h1 class="underline-text">System</h1>
				<div class="settingsflexrow">
					<h2>Discord Connection</h2>
					<label class="switch">
						<input type="checkbox" id="toggleSwitchDiscord" onclick="toggleDiscordAPI()" />
						<span class="slider round"></span>
					</label>
				</div>
				<h5>Share your status in Discord!</h5>
				<div class="settingsflexrow">
					<h2>Stabilise Volume while downloading music</h2>
					<label class="switch">
						<input type="checkbox" id="stabiliseVolumeToggle" onclick="stabiliseVolumeToggleTogglerFunction()" />
						<span class="slider round"></span>
					</label>
				</div>
				<h5>If not selected, you will need to manually stabilise song volumes using the buttons below.</h5>
				<div class="settingsflexrow">
					<h2>Stabilise all songs volumes:</h2>
					<button onclick="processAllFiles()">Stabilise</button>
					<div class="settingsflexrow" id="stabiliseProgress">Progress: Didn't start</div>
				</div>
				<h5>Helps all the songs sounds the same on the same volume.</h5>
                <!-- TODO: Check song data using musicbrainz API -->
				<div class="settingsflexrow">
					<h2>Redownload old songs</h2>
					<button onclick="redownloadAllSongs()">Redownload</button>
				</div>
				<h5>You can use your old database to redownload all the songs back.</h5>
				<div class="settingsflexrow">
					<h2>Debug Mode</h2>
					<button id="debugButton">Toggle</button>
				</div>
				<h5>Enter debug mode to see the errors and the logs.</h5>
			</div>
			<div id="statistics-content" class="scrollArea hidden tab-content"></div>
		</div>

		<div id="videothumbnailbox"></div>
		<div id="video-controls" class="flexrow">
			<div id="allbuttons">
				<button id="backwardButton" class="audio-button" data-tooltip="Back 5 Seconds" onclick="skipBackward()"></button>
				<button id="previousSongButton" class="audio-button" data-tooltip="Play Previous Song" onclick="playPreviousSong()"></button>
				<button id="playButton" class="audio-button" data-tooltip="Play Song"></button>
				<button id="pauseButton" class="audio-button" data-tooltip="Pause Song" style="display: none"></button>
				<button id="nextSongButton" class="audio-button" data-tooltip="Play Next Song" onclick="playNextSong()"></button>
				<button id="forwardButton" class="audio-button" data-tooltip="Forward 5 Seconds" onclick="skipForward()"></button>
				<button id="autoplayButton" class="audio-button" data-tooltip="Toggle Autoplay" onclick="toggleAutoplay()"></button>
				<button id="shuffleButton" class="audio-button" data-tooltip="Toggle Shuffle" onclick="toggleShuffle()"></button>
				<button id="muteButton" class="audio-button" data-tooltip="Toggle Mute" onclick="mute()"></button>
				<button id="speedButton" class="audio-button" data-tooltip="Speed Settings" onclick="speed()"></button>
				<button id="loopButton" class="audio-button" data-tooltip="Toggle Loop" onclick="toggleLoop()"></button>
			</div>
			<div id="musicstuff" class="flexcolumn">
				<div id="music-info">
					<span id="song-name">No song is being played.</span>
				</div>
				<div id="music-controls" class="flexrow">
					<input type="range" id="video-progress" min="0" max="100" value="0" />
				</div>
			</div>
			<span id="video-length">00:00 / 00:00</span>
			<input type="range" id="volume" min="0" max="100" value="100" />
			<button id="songSettingsButton" class="audio-button"></button>
			<div id="settingsMenu" class="settings-menu">
				<div class="settingsMenuButtons" onclick="bottomRightFunctions('addToPlaylist')">Add to Playlist</div>
				<div class="settingsMenuButtons" onclick="bottomRightFunctions('addToFavorites')">Add to Favorites</div>
				<div class="settingsMenuButtons" onclick="bottomRightFunctions('customise')">Customise Song</div>
			</div>
		</div>
		<div id="tooltip"></div>
		<script src="helpers.js"></script>
		<script src="playlists.js"></script>
		<script src="discord.js"></script>
		<script src="renderer.js"></script>
		<script src="scan_songs.js"></script>
		<script src="run_spawn_processes.js"></script>
	</body>
</html>
